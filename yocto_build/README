This repo contains the Makefile and README to build the
OpenEmbedded/Yocto BSP layer for Intel Radio Processors like HawkCrest

Targets have been setup to clone the required layers in the current directory,
update the conf files and build all targets.

Supported Targets and Usage
===========================

Usage:

$ make fs META_SRP_REL=<tag name>
    Pull and Build Yocto Linux

$ make sdk install-sdk META_SRP_REL=<tag name> SDK_INSTALL_DIR=<loc to install sdk>
    Pull and Build Yocto Linux and then build and install sdk

$ make craff_gen META_SRP_REL=<tag name>
    Create yocto.craff image from hddimg

$ make cleansstate META_SRP_REL=<tag name>
    Calls bitbake cleansstate for virtual/kernel and simicsfs-client

$ make clean META_SRP_REL=<tag name>
    Deletes build directoy

$ make clobber META_SRP_REL=<tag name>
    Deletes build directory and all layers

$ make help META_SRP_REL=<tag name>
    To print these usage instructions

Parameters:

META_SRP_REL=<tag-name>: Optional:
    Tag-name in META-SRP repo
    Defaults to current release

META_SRP_URL=<URL-for-meta-intel-srp>: Optional:
    Defaults to https://github.com/axxia/meta-intel-srp.git

INCLUDE_SIMICSFS: Optional: Default = true:
    When set to 'true', builds with simicsfs,
    Set to 'false' builds without simicsfs

SIMICS_FILE=<Location-of-Simics-archive>: Required iff INCLUDE_SIMICS==true
    Default: <Current Directory>

INCLUDE_UPDATES: Optional: Default = true:
    When set to 'true', will include meta-intel-srp-updates Yocto
    layer with minimal changes to fix older Intel Axxia relases.

META_UPDATES_URL=<URL-for-meta-intel-srp-updates>: Optional:
    Defaults to https://github.com/srp/meta-intel-srp-updates.git"
    Required: when INCLUDE_UPDATES='true'

BLDDIR=<build dir>: Optional
    Location of the build
    Defaults to <Current Directory>/srp-build

BB_IMAGE_TYPE=<image name>: Optional
    The type of image to build
    Default: srp-image-sim
    Other choices are: srp-image-vcn, srp-image-small

SDK_INSTALL_DIR=<sdk-install-location>
    Required when 'install-sdk' is called

LINUX_VERSION=<version>: Optional:
    Default: '6.6'
    Supported versions are: 6.6

BB_NUMBER_THREADS=<num_threads>: Optional:
    Number of parallel threads to run
    Defaults to '24'

DL_DIR=<download-directory>: Optional:
    A pre-populated shared download directory used for build time/space saving.
    Default: $BLDDIR/downloads

Manual Build Instructions
-------------------------

The step-by-step build instructions and linux patch information is included
in the README of the meta-intel-srp layer. This can be viewed at:

    https://github.com/srp/meta-intel-srp/blob/<META_SRP_REL>/README.qsp

    where: META_SRP_REL is the release tag.

